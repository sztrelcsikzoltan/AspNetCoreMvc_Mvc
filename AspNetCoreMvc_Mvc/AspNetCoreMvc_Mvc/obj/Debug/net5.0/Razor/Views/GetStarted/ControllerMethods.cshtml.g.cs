#pragma checksum "C:\Data\pers dev\IT\KKSZKI\back end\211013 MVC beadando\AspNetCoreMvc_Mvc\AspNetCoreMvc_Mvc\Views\GetStarted\ControllerMethods.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "076c390d7bb0aba4d7799708ddfafcfe76da9345"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_GetStarted_ControllerMethods), @"mvc.1.0.view", @"/Views/GetStarted/ControllerMethods.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Data\pers dev\IT\KKSZKI\back end\211013 MVC beadando\AspNetCoreMvc_Mvc\AspNetCoreMvc_Mvc\Views\_ViewImports.cshtml"
using AspNetCoreMvc_Mvc;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Data\pers dev\IT\KKSZKI\back end\211013 MVC beadando\AspNetCoreMvc_Mvc\AspNetCoreMvc_Mvc\Views\_ViewImports.cshtml"
using AspNetCoreMvc_Mvc.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"076c390d7bb0aba4d7799708ddfafcfe76da9345", @"/Views/GetStarted/ControllerMethods.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"fe8f896a9f1199a05e02d8a830325cc6fb68bd59", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_GetStarted_ControllerMethods : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    #nullable disable
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("button"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-area", "", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-controller", "GetStarted", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-action", "WorkWithDatabase", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-action", "AddSearchCapability", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "C:\Data\pers dev\IT\KKSZKI\back end\211013 MVC beadando\AspNetCoreMvc_Mvc\AspNetCoreMvc_Mvc\Views\GetStarted\ControllerMethods.cshtml"
  
    ViewData["Title"] = "Controller methods";

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div class=\"container\">\r\n    <div class=\"div-flex\">\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "076c390d7bb0aba4d7799708ddfafcfe76da93455232", async() => {
                WriteLiteral("Previous: Work with a database");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Area = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Controller = (string)__tagHelperAttribute_2.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_2);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Action = (string)__tagHelperAttribute_3.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n        <span class=\"span-flex\"></span>\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "076c390d7bb0aba4d7799708ddfafcfe76da93456953", async() => {
                WriteLiteral("Next: Add search capability");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Area = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Controller = (string)__tagHelperAttribute_2.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_2);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Action = (string)__tagHelperAttribute_4.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_4);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
    </div>

    <h2>Part 6, controller methods and views in ASP.NET Core</h2>

    <p>We have a good start to the movie app, but the presentation isn't ideal, for example, <strong>ReleaseDate</strong> should be two words.</p>
    <p><img src=""/img/controllermethods01-m55.png"" alt=""Index view: Release Date is one word (no space) and every movie release date shows a time of 12 AM"" title=""Index view: Release Date is one word (no space) and every movie release date shows a time of 12 AM""></p>
    <p>Open the <em>Models/Movie.cs</em> file and add the highlighted lines shown below:</p>
<pre><code class=""lang-csharp"" highlight-lines=""2,3,12-13,17"">using System;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace MvcMovie.Models
{
    public class Movie
    {
        public int Id { get; set; }
        public string Title { get; set; }

        [Display(Name = &quot;Release Date&quot;)]
        [DataType(DataType.Date)]
        public DateT");
            WriteLiteral(@"ime ReleaseDate { get; set; }
        public string Genre { get; set; }

        [Column(TypeName = &quot;decimal(18, 2)&quot;)]
        public decimal Price { get; set; }
    }
}
</code></pre>
    <p>We cover <a href=""https://docs.microsoft.com/en-us/aspnet/mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6"" data-linktype=""absolute-path"">DataAnnotations</a> in the next tutorial. The <a href=""https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.displaymetadata"" data-linktype=""absolute-path"">Display</a> attribute specifies what to display for the name of a field (in this case &quot;Release Date&quot; instead of &quot;ReleaseDate&quot;). The <a href=""https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.dataannotations.internal.datatypeattributeadapter"" data-linktype=""absolute-path"">DataType</a> attribute specifies the type of the data (Date), so the time information stored in the field isn't displayed.</p>
    <p>The <code>[Column(Ty");
            WriteLiteral(@"peName = &quot;decimal(18, 2)&quot;)]</code> data annotation is required so Entity Framework Core can correctly map <code>Price</code> to currency in the database. For more information, see <a href=""https://docs.microsoft.com/en-us/ef/core/modeling/relational/data-types"" data-linktype=""absolute-path"">Data Types</a>.</p>
    <p>Browse to the <code>Movies</code> controller and hold the mouse pointer over an <strong>Edit</strong> link to see the target URL.</p>
    <p><img src=""/img/controllermethods02-edit7.png"" alt=""Browser window with mouse over the Edit link and a link Url of https://localhost:5001/Movies/Edit/5 is shown"" title=""Browser window with mouse over the Edit link and a link Url of https://localhost:5001/Movies/Edit/5 is shown""></p>
    <p>The <strong>Edit</strong>, <strong>Details</strong>, and <strong>Delete</strong> links are generated by the Core MVC Anchor Tag Helper in the <em>Views/Movies/Index.cshtml</em> file.</p>
<pre><code class=""lang-cshtml"" highlight-lines=""1-3"">        &lt;a asp-ac");
            WriteLiteral("tion=&quot;Edit&quot; asp-route-id=&quot;");
            WriteLiteral("@item.ID&quot;&gt;Edit&lt;/a&gt; |\r\n        &lt;a asp-action=&quot;Details&quot; asp-route-id=&quot;");
            WriteLiteral("@item.ID&quot;&gt;Details&lt;/a&gt; |\r\n        &lt;a asp-action=&quot;Delete&quot; asp-route-id=&quot;");
            WriteLiteral(@"@item.ID&quot;&gt;Delete&lt;/a&gt;
    &lt;/td&gt;
&lt;/tr&gt;
</code></pre>
    <p><a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-5.0"" data-linktype=""relative-path"">Tag Helpers</a> enable server-side code to participate in creating and rendering HTML elements in Razor files. In the code above, the <code>AnchorTagHelper</code> dynamically generates the HTML <code>href</code> attribute value from the controller action method and route id. You use <strong>View Source</strong> from your favorite browser or use the developer tools to examine the generated markup. A portion of the generated HTML is shown below:</p>
<pre><code class=""lang-html""> &lt;td&gt;
    &lt;a href=&quot;/Movies/Edit/4&quot;&gt; Edit &lt;/a&gt; |
    &lt;a href=&quot;/Movies/Details/4&quot;&gt; Details &lt;/a&gt; |
    &lt;a href=&quot;/Movies/Delete/4&quot;&gt; Delete &lt;/a&gt;
&lt;/td&gt;
</code></pre>
    <p>Recall the format for <a href=""https://docs.microsoft.com/en-us/aspnet");
            WriteLiteral(@"/core/mvc/controllers/routing?view=aspnetcore-5.0"" data-linktype=""relative-path"">routing</a> set in the <em>Startup.cs</em> file:</p>
<pre><code class=""lang-csharp"" highlight-lines=""5"">app.UseEndpoints(endpoints =&gt;
{
    endpoints.MapControllerRoute(
        name: &quot;default&quot;,
        pattern: &quot;{controller=Home}/{action=Index}/{id?}&quot;);
});
</code></pre>
    <p>ASP.NET Core translates <code>https://localhost:5001/Movies/Edit/4</code> into a request to the <code>Edit</code> action method of the <code>Movies</code> controller with the parameter <code>Id</code> of 4. (Controller methods are also known as action methods.)</p>
    <p><a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-5.0"" data-linktype=""relative-path"">Tag Helpers</a> are one of the most popular new features in ASP.NET Core. For more information, see <a href=""#additional-resources"" data-linktype=""self-bookmark"">Additional resources</a>.</p>
    <p><a name=""get-post""></a></");
            WriteLiteral(@"p>
    <p>Open the <code>Movies</code> controller and examine the two <code>Edit</code> action methods. The following code shows the <code>HTTP GET Edit</code> method, which fetches the movie and populates the edit form generated by the <em>Edit.cshtml</em> Razor file.</p>
<pre><code class=""lang-csharp"">// GET: Movies/Edit/5
public async Task&lt;IActionResult&gt; Edit(int? id)
{
    if (id == null)
    {
        return NotFound();
    }

    var movie = await _context.Movie.FindAsync(id);
    if (movie == null)
    {
        return NotFound();
    }
    return View(movie);
}
</code></pre>
    <p>The following code shows the <code>HTTP POST Edit</code> method, which processes the posted movie values:</p>
<pre><code class=""lang-csharp"">// POST: Movies/Edit/5
// To protect from overposting attacks, please enable the specific properties you want to bind to, for 
// more details see http://go.microsoft.com/fwlink/?LinkId=317598.
[HttpPost]
[ValidateAntiForgeryToken]
public async Task&lt;IAc");
            WriteLiteral(@"tionResult&gt; Edit(int id, [Bind(&quot;ID,Title,ReleaseDate,Genre,Price&quot;)] Movie movie)
{
    if (id != movie.ID)
    {
        return NotFound();
    }

    if (ModelState.IsValid)
    {
        try
        {
            _context.Update(movie);
            await _context.SaveChangesAsync();
        }
        catch (DbUpdateConcurrencyException)
        {
            if (!MovieExists(movie.ID))
            {
                return NotFound();
            }
            else
            {
                throw;
            }
        }
        return RedirectToAction(&quot;Index&quot;);
    }
    return View(movie);
}
</code></pre>
    <p>The <code>[Bind]</code> attribute is one way to protect against <a href=""https://docs.microsoft.com/en-us/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost"" data-linktype=""absolute-path"">over-posting</a>. You should only inc");
            WriteLiteral(@"lude properties in the <code>[Bind]</code> attribute that you want to change. For more information, see <a href=""https://docs.microsoft.com/en-us/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application"" data-linktype=""absolute-path"">Protect your controller from over-posting</a>. <a href=""https://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/"" data-linktype=""external"">ViewModels</a> provide an alternative approach to prevent over-posting.</p>
    <p>Notice the second <code>Edit</code> action method is preceded by the <code>[HttpPost]</code> attribute.</p>
<pre><code class=""lang-csharp"" highlight-lines=""1"">[HttpPost]
[ValidateAntiForgeryToken]
public async Task&lt;IActionResult&gt; Edit(int id, [Bind(&quot;ID,Title,ReleaseDate,Genre,Price&quot;)] Movie movie)
{
    if (id != movie.ID)
    {
        return NotFound();
    }

    if (ModelState.IsValid)");
            WriteLiteral(@"
    {
        try
        {
            _context.Update(movie);
            await _context.SaveChangesAsync();
        }
        catch (DbUpdateConcurrencyException)
        {
            if (!MovieExists(movie.ID))
            {
                return NotFound();
            }
            else
            {
                throw;
            }
        }
        return RedirectToAction(nameof(Index));
    }
    return View(movie);
}
</code></pre>
    <p>The <code>HttpPost</code> attribute specifies that this <code>Edit</code> method can be invoked <em>only</em> for <code>POST</code> requests. You could apply the <code>[HttpGet]</code> attribute to the first edit method, but that's not necessary because <code>[HttpGet]</code> is the default.</p>
    <p>The <code>ValidateAntiForgeryToken</code> attribute is used to <a href=""https://docs.microsoft.com/en-us/aspnet/core/security/anti-request-forgery?view=aspnetcore-5.0"" data-linktype=""relative-path"">prevent forgery of a request</a> and is ");
            WriteLiteral(@"paired up with an anti-forgery token generated in the edit view file (<em>Views/Movies/Edit.cshtml</em>). The edit view file generates the anti-forgery token with the <a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Form Tag Helper</a>.</p>
<pre><code class=""lang-cshtml"">&lt;form asp-action=&quot;Edit&quot;&gt;
</code></pre>
    <p>The <a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Form Tag Helper</a> generates a hidden anti-forgery token that must match the <code>[ValidateAntiForgeryToken]</code> generated anti-forgery token in the <code>Edit</code> method of the Movies controller. For more information, see <a href=""https://docs.microsoft.com/en-us/aspnet/core/security/anti-request-forgery?view=aspnetcore-5.0"" data-linktype=""relative-path"">Prevent Cross-Site Request Forgery (XSRF/CSRF) attacks in ASP.NET Core</a>.</p>
    <p>The <code>");
            WriteLiteral(@"HttpGet Edit</code> method takes the movie <code>ID</code> parameter, looks up the movie using the Entity Framework <code>FindAsync</code> method, and returns the selected movie to the Edit view. If a movie cannot be found, <code>NotFound</code> (HTTP 404) is returned.</p>
<pre><code class=""lang-csharp"">// GET: Movies/Edit/5
public async Task&lt;IActionResult&gt; Edit(int? id)
{
    if (id == null)
    {
        return NotFound();
    }

    var movie = await _context.Movie.FindAsync(id);
    if (movie == null)
    {
        return NotFound();
    }
    return View(movie);
}
</code></pre>
    <p>When the scaffolding system created the Edit view, it examined the <code>Movie</code> class and created code to render <code>&lt;label&gt;</code> and <code>&lt;input&gt;</code> elements for each property of the class. The following example shows the Edit view that was generated by the Visual Studio scaffolding system:</p>
<pre><code class=""lang-cshtml"">
    ");
            WriteLiteral("@model MvcMovie.Models.Movie\r\n\r\n    ");
            WriteLiteral(@"@{
    ViewData[&quot; Title & quot;] = &quot; Edit & quot; ;
    }

    &lt;h1&gt;Edit&lt;/h1&gt;

    &lt;h4&gt;Movie&lt;/h4&gt;
    &lt;hr /&gt;
    &lt;div class=&quot;row&quot;&gt;
    &lt;div class=&quot;col-md-4&quot;&gt;
    &lt;form asp-action=&quot;Edit&quot;&gt;
    &lt;div asp-validation-summary=&quot;ModelOnly&quot; class=&quot;text-danger&quot;&gt;&lt;/div&gt;
    &lt;input type=&quot;hidden&quot; asp-for=&quot;Id&quot; /&gt;
    &lt;div class=&quot;form-group&quot;&gt;
    &lt;label asp-for=&quot;Title&quot; class=&quot;control-label&quot;&gt;&lt;/label&gt;
    &lt;input asp-for=&quot;Title&quot; class=&quot;form-control&quot; /&gt;
    &lt;span asp-validation-for=&quot;Title&quot; class=&quot;text-danger&quot;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
    &lt;label asp-for=&quot;ReleaseDate&quot; class=&quot;control-label&quot;&gt;&lt;/label&gt;
    &lt;input asp-for=&quot;ReleaseDate&quot; class=&quot;form-control&quot; /&gt;
    &lt;s");
            WriteLiteral(@"pan asp-validation-for=&quot;ReleaseDate&quot; class=&quot;text-danger&quot;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
    &lt;label asp-for=&quot;Genre&quot; class=&quot;control-label&quot;&gt;&lt;/label&gt;
    &lt;input asp-for=&quot;Genre&quot; class=&quot;form-control&quot; /&gt;
    &lt;span asp-validation-for=&quot;Genre&quot; class=&quot;text-danger&quot;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
    &lt;label asp-for=&quot;Price&quot; class=&quot;control-label&quot;&gt;&lt;/label&gt;
    &lt;input asp-for=&quot;Price&quot; class=&quot;form-control&quot; /&gt;
    &lt;span asp-validation-for=&quot;Price&quot; class=&quot;text-danger&quot;&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Save&quot; class=&quot;btn btn-primary&quot; /&gt;
    &lt;/div&gt;
    &lt;/form&gt;
    &lt;/div&gt;
    &lt;/div&gt;

    &lt;div&gt;
    &lt;a");
            WriteLiteral(" asp-action=&quot;Index&quot;&gt;Back to List&lt;/a&gt;\r\n    &lt;/div&gt;\r\n\r\n    ");
            WriteLiteral("@section Scripts {\r\n        ");
            WriteLiteral("@{await Html.RenderPartialAsync(&quot; _ValidationScriptsPartial & quot;);}\r\n    }\r\n</code></pre>\r\n    <p>Notice how ");
            WriteLiteral(@"@model MvcMovie.Models.Movie </ code > specifies that the view expects the model for the view template to be of type <code>Movie</code>.</p>
    <p>The scaffolded code uses several Tag Helper methods to streamline the HTML markup. The <a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Label Tag Helper</a> displays the name of the field (&quot;Title&quot;, &quot;ReleaseDate&quot;, &quot;Genre&quot;, or &quot;Price&quot;). The <a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Input Tag Helper</a> renders an HTML <code>&lt;input&gt;</code> element. The <a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Validation Tag Helper</a> displays any validation messages associated with that property.</p>
    <p>Run the application and navigate to the <code>/Movies</code> URL");
            WriteLiteral(@". Click an <strong>Edit</strong> link. In the browser, view the source for the page. The generated HTML for the <code>&lt;form&gt;</code> element is shown below.</p>
<pre><code class=""lang-HTML"" highlight-lines=""1,6,10,17,24,28"">&lt;form action=&quot;/Movies/Edit/7&quot; method=&quot;post&quot;&gt;
    &lt;div class=&quot;form-horizontal&quot;&gt;
        &lt;h4&gt;Movie&lt;/h4&gt;
        &lt;hr /&gt;
        &lt;div class=&quot;text-danger&quot; /&gt;
        &lt;input type=&quot;hidden&quot; data-val=&quot;true&quot; data-val-required=&quot;The ID field is required.&quot; id=&quot;ID&quot; name=&quot;ID&quot; value=&quot;7&quot; /&gt;
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;label class=&quot;control-label col-md-2&quot; for=&quot;Genre&quot; /&gt;
            &lt;div class=&quot;col-md-10&quot;&gt;
                &lt;input class=&quot;form-control&quot; type=&quot;text&quot; id=&quot;Genre&quot; name=&quot;Genre&quot; value=&quot;Western&quot; /&gt;
                &lt;");
            WriteLiteral(@"span class=&quot;text-danger field-validation-valid&quot; data-valmsg-for=&quot;Genre&quot; data-valmsg-replace=&quot;true&quot;&gt;&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;label class=&quot;control-label col-md-2&quot; for=&quot;Price&quot; /&gt;
            &lt;div class=&quot;col-md-10&quot;&gt;
                &lt;input class=&quot;form-control&quot; type=&quot;text&quot; data-val=&quot;true&quot; data-val-number=&quot;The field Price must be a number.&quot; data-val-required=&quot;The Price field is required.&quot; id=&quot;Price&quot; name=&quot;Price&quot; value=&quot;3.99&quot; /&gt;
                &lt;span class=&quot;text-danger field-validation-valid&quot; data-valmsg-for=&quot;Price&quot; data-valmsg-replace=&quot;true&quot;&gt;&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- Markup removed for brevity --&gt;
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;di");
            WriteLiteral(@"v class=&quot;col-md-offset-2 col-md-10&quot;&gt;
                &lt;input type=&quot;submit&quot; value=&quot;Save&quot; class=&quot;btn btn-default&quot; /&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;input name=&quot;__RequestVerificationToken&quot; type=&quot;hidden&quot; value=&quot;CfDJ8Inyxgp63fRFqUePGvuI5jGZsloJu1L7X9le1gy7NCIlSduCRx9jDQClrV9pOTTmqUyXnJBXhmrjcUVDJyDUMm7-MF_9rK8aAZdRdlOri7FmKVkRe_2v5LIHGKFcTjPrWPYnc9AdSbomkiOSaTEg7RU&quot; /&gt;
&lt;/form&gt;
</code></pre>
    <p>The <code>&lt;input&gt;</code> elements are in an <code>HTML &lt;form&gt;</code> element whose <code>action</code> attribute is set to post to the <code>/Movies/Edit/id</code> URL. The form data will be posted to the server when the <code>Save</code> button is clicked. The last line before the closing <code>&lt;/form&gt;</code> element shows the hidden <a href=""https://docs.microsoft.com/en-us/aspnet/core/security/anti-request-forgery?view=aspnetcore-5.0"" data-linktype=""relative-path"">XSR");
            WriteLiteral(@"F</a> token generated by the <a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Form Tag Helper</a>.</p>
    <h4 id=""processing-the-post-request-1"">Processing the POST Request</h4>
    <p>The following listing shows the <code>[HttpPost]</code> version of the <code>Edit</code> action method.</p>
<pre><code class=""lang-csharp"">[HttpPost]
[ValidateAntiForgeryToken]
public async Task&lt;IActionResult&gt; Edit(int id, [Bind(&quot;ID,Title,ReleaseDate,Genre,Price&quot;)] Movie movie)
{
    if (id != movie.ID)
    {
        return NotFound();
    }

    if (ModelState.IsValid)
    {
        try
        {
            _context.Update(movie);
            await _context.SaveChangesAsync();
        }
        catch (DbUpdateConcurrencyException)
        {
            if (!MovieExists(movie.ID))
            {
                return NotFound();
            }
            else
            {
                throw;
   ");
            WriteLiteral(@"         }
        }
        return RedirectToAction(nameof(Index));
    }
    return View(movie);
}
</code></pre>
    <p>The <code>[ValidateAntiForgeryToken]</code> attribute validates the hidden <a href=""https://docs.microsoft.com/en-us/aspnet/core/security/anti-request-forgery?view=aspnetcore-5.0"" data-linktype=""relative-path"">XSRF</a> token generated by the anti-forgery token generator in the <a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Form Tag Helper</a></p>
    <p>The <a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-5.0"" data-linktype=""relative-path"">model binding</a> system takes the posted form values and creates a <code>Movie</code> object that's passed as the <code>movie</code> parameter. The <code>ModelState.IsValid</code> property verifies that the data submitted in the form can be used to modify (edit or update) a <code>Movie</code> object. If the data is");
            WriteLiteral(@" valid, it's saved. The updated (edited) movie data is saved to the database by calling the <code>SaveChangesAsync</code> method of database context. After saving the data, the code redirects the user to the <code>Index</code> action method of the <code>MoviesController</code> class, which displays the movie collection, including the changes just made.</p>
    <p>Before the form is posted to the server, client-side validation checks any validation rules on the fields. If there are any validation errors, an error message is displayed and the form isn't posted. If JavaScript is disabled, you won't have client-side validation but the server will detect the posted values that are not valid, and the form values will be redisplayed with error messages. Later in the tutorial we examine <a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/models/validation?view=aspnetcore-5.0"" data-linktype=""relative-path"">Model Validation</a> in more detail. The <a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/w");
            WriteLiteral(@"orking-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Validation Tag Helper</a> in the <em>Views/Movies/Edit.cshtml</em> view template takes care of displaying appropriate error messages.</p>
    <p><img src=""/img/controllermethods03-val.png"" alt=""Edit view: An exception for an incorrect Price value of abc states that The field Price must be a number. An exception for an incorrect Release Date value of xyz states Please enter a valid date."" title=""Edit view: An exception for an incorrect Price value of abc states that The field Price must be a number. An exception for an incorrect Release Date value of xyz states Please enter a valid date.""></p>
    <p>All the <code>HttpGet</code> methods in the movie controller follow a similar pattern. They get a movie object (or list of objects, in the case of <code>Index</code>), and pass the object (model) to the view. The <code>Create</code> method passes an empty movie object to the <code>Create</code> view. All the methods that create, edit, delete, o");
            WriteLiteral(@"r otherwise modify data do so in the <code>[HttpPost]</code> overload of the method. Modifying data in an <code>HTTP GET</code> method is a security risk. Modifying data in an <code>HTTP GET</code> method also violates HTTP best practices and the architectural <a href=""http://rest.elkstein.org/"" data-linktype=""external"">REST</a> pattern, which specifies that GET requests shouldn't change the state of your application. In other words, performing a GET operation should be a safe operation that has no side effects and doesn't modify your persisted data.</p>
    <h2 id=""additional-resources-1"">Additional resources</h2>
    <ul>
        <li><a href=""https://docs.microsoft.com/en-us/aspnet/core/fundamentals/localization?view=aspnetcore-5.0"" data-linktype=""relative-path"">Globalization and localization</a></li>
        <li><a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-5.0"" data-linktype=""relative-path"">Introduction to Tag Helpers</a></li>
        <li><a href=""h");
            WriteLiteral(@"ttps://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/authoring?view=aspnetcore-5.0"" data-linktype=""relative-path"">Author Tag Helpers</a></li>
        <li><a href=""https://docs.microsoft.com/en-us/aspnet/core/security/anti-request-forgery?view=aspnetcore-5.0"" data-linktype=""relative-path"">Prevent Cross-Site Request Forgery (XSRF/CSRF) attacks in ASP.NET Core</a></li>
        <li>Protect your controller from <a href=""https://docs.microsoft.com/en-us/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application"" data-linktype=""absolute-path"">over-posting</a></li>
        <li><a href=""https://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/"" data-linktype=""external"">ViewModels</a></li>
        <li><a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Form Tag Helper</a></li>
 ");
            WriteLiteral(@"       <li><a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Input Tag Helper</a></li>
        <li><a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Label Tag Helper</a></li>
        <li><a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Select Tag Helper</a></li>
        <li><a href=""https://docs.microsoft.com/en-us/aspnet/core/mvc/views/working-with-forms?view=aspnetcore-5.0"" data-linktype=""relative-path"">Validation Tag Helper</a></li>
    </ul>

    <div class=""div-flex"">
        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "076c390d7bb0aba4d7799708ddfafcfe76da934534559", async() => {
                WriteLiteral("Previous: Work with a database");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Area = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Controller = (string)__tagHelperAttribute_2.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_2);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Action = (string)__tagHelperAttribute_3.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n        <span class=\"span-flex\"></span>\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "076c390d7bb0aba4d7799708ddfafcfe76da934536281", async() => {
                WriteLiteral("Next: Add search capability");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Area = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Controller = (string)__tagHelperAttribute_2.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_2);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Action = (string)__tagHelperAttribute_4.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_4);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n    </div>\r\n\r\n</div>\r\n\r\n");
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
